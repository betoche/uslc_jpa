package com.uslc.po.jpa.test;

import java.util.List;

import javax.persistence.Query;

import com.uslc.po.jpa.entity.Color;
import com.uslc.po.jpa.entity.Item;
import com.uslc.po.jpa.entity.PurchaseOrder;
import com.uslc.po.jpa.entity.Upc;
import com.uslc.po.jpa.entity.User;
import com.uslc.po.jpa.util.UslcJpa;

public class UslcJpaManager {
	public List<PurchaseOrder> poList = null;
	public List<Color> colorList = null;
	public List<Upc> upcList = null;
	public List<Item> itemList = null;
	public List<User> userList = null;
	private UslcJpa jpa = null;
	
	public List<PurchaseOrder> getPurchaseOrderList() {
		if( poList == null ) {
			Query q = getJpa().getEntityManager().createQuery("SELECT po FROM PurchaseOrder po WHERE po.deleted=:deleted ORDER BY po.referenceNumber DESC");
			q.setParameter("deleted", false);
			poList = (List<PurchaseOrder>)q.getResultList();
		}
		return poList;
	}
	
	public List<Color> getColors(){
		if( colorList == null ) {
			Query q = getJpa().getEntityManager().createQuery("SELECT c FROM Color c");
			colorList = (List<Color>)q.getResultList();
		}
		return colorList;
	}
	public List<Upc> getUpcs(){
		if( upcList == null ) {
			Query q = getJpa().getEntityManager().createQuery("SELECT u FROM Upc u ORDER BY u.deleted, u.upcCode ASC");
			upcList = (List<Upc>)q.getResultList();
		}
		return upcList;
	}
	public List<Item> getItems() {
		if( itemList == null ) {
			Query q = getJpa().getEntityManager().createQuery("SELECT i FROM Item i");
			itemList = (List<Item>)q.getResultList();
		}
		return itemList;
	}
	public List<User> getUsers() {
		if( userList == null ) {
			Query q = getJpa().getEntityManager().createQuery("SELECT u FROM User u ORDER BY u.enabled DESC, u.userType ASC, u.firstName ASC");
			userList = (List<User>)q.getResultList();
		}
		return userList;
	}
	
	private UslcJpa getJpa() {
		if( jpa == null ) {
			jpa = new UslcJpa();
		}
		return jpa;
	}
	
	public static void main(String[] args) {

	}
}
